var e;const t=window.TrelloPowerUp.util.relativeUrl("images/white-book.svg"),o=window.TrelloPowerUp.util.relativeUrl("images/edit.svg");let r=!0;const a=e=>e.isMemberSignedIn()&&e.memberCanWriteToModel("board"),i=e=>e.modal({title:"Read Me Configuration",url:"./settings.html",height:529}),l=(e,t)=>{let o;let{popUpOnLoad:r,onlyPopUpOnFirstVisit:a,onlyShowNonMembers:i}=e;return"boolean"==typeof r?o={self:r,always:r&&!(a||i),onlyToNonMembers:i&&!a,ifFirstVisit:a,ifUpdated:!1}:void 0===r&&(o={self:!1,always:!1,onlyToNonMembers:!1,ifFirstVisit:!1,ifUpdated:!1}),t.set("board","shared","readme",{...e,popUpOnLoad:o})};window.TrelloPowerUp.initialize({"board-buttons":e=>{let n=e=>{let t=a(e);e.modal({title:"Read Me",url:"./modal.html",height:529,actions:t?[{position:"left",alt:"Configure Read Me",icon:o,callback:e=>t?i(e):null}]:[]}),r=!1};return e.get("board","shared","readme").then(o=>{if(!o)return[];if("object"!=typeof o.popUpOnLoad)return l(o,e),[];let{content:i,updatedAt:d,popUpOnLoad:s,showBoardButton:p}=o,c=a(e),m=()=>{i.length&&s.self&&r&&(s.always?n(e):s.onlyToNonMembers&&(c?r=!1:n(e)),e.get("board","private","readme:lastRead").then(t=>{s.ifFirstVisit&&c&&!t?n(e):s.ifUpdated&&t<d&&n(e)}).catch(()=>{console.error("Failed to load readme:lastRead")}))};return(c?e.get("board","private","readme:dismissed").then(e=>{e||m()}).catch(e=>{console.error("Failed to get readme:dismissed",{err:e})}):m(),p)?[{icon:t,text:"Read Me",condition:"always",callback:e=>n(e)}]:[]}).catch(e=>(console.error("Failed to get Read Me content",e),[]))},"show-settings":e=>i(e),"on-enable":e=>i(e)},{targetOrigin:["http://localhost:2999/","http://localhost:3002/"].includes(null===(e=document)||void 0===e?void 0:e.referrer)?document.referrer:"https://trello.com",Sentry:window.Sentry});
//# sourceMappingURL=index.4c09d49d.js.map
